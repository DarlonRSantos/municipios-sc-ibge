{% extends "base.html" %}

{% block title %}Consulta IBGE{% endblock %}

{% block content %}
<div class="ibge-container">
    <h1>Consulta de C√≥digo IBGE</h1>
    
    <div class="box">
        <h3>Atualizar Dados</h3>
        <form action="{{ url_for('ibge.atualizar') }}" method="POST">
            <button type="submit" class="btn btn-secondary">‚Üª Atualizar Lista de Munic√≠pios</button>
        </form>
        
    </div>
    
    <div class="box">
        <h3>Consultar Munic√≠pio</h3>
        <form method="POST" action="{{ url_for('ibge.busca') }}">
            <div class="search-form">
                <input type="text" name="municipio" placeholder="Ex: Florian√≥polis" required>
                <button type="submit" class="btn btn-primary">üîç Buscar</button>
            </div>
        </form>
        
        {% if resultado %}
        <div class="result">
            <p><strong>C√≥digo IBGE:</strong> {{ resultado.codigo }}</p>
            <p><strong>Munic√≠pio:</strong> {{ resultado.nome }}</p>
            <p><strong>UF:</strong> {{ resultado.uf }}</p>
        </div>
        {% endif %}
        
        {% if mensagem %}
        <div class="{{ 'success' if mensagem.startswith('Lista') else 'error' }}">{{ mensagem }}</div>
        {% endif %}
    </div>
</div>
{% endblock %}