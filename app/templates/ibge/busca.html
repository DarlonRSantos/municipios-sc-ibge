{% extends "base.html" %}

{% block title %}Consulta IBGE{% endblock %}

{% block content %}
<div class="ibge-container">
    <h1>Consulta de C칩digo IBGE</h1>

 <div class="box">
    <h3>Atualizar Dados</h3>
    <form method="POST" action="{{ url_for('ibge.atualizar') }}">
        <div class="mb-4">
            <label for="uf" class="form-label fw-semibold">
                <i class="bi bi-geo-alt-fill me-1"></i> Selecione o Estado (UF):
            </label>
            <div class="input-group shadow-sm">
                <span class="input-group-text bg-white border-primary">
                    <i class="bi bi-globe-americas text-primary"></i>
                </span>
                <select class="form-select border-primary rounded-end" name="uf" id="uf" required>
                    <option value="" selected disabled>-- Escolha a UF --</option>
                    <optgroup label="Regi칚o Norte">
                        <option value="AC">Acre</option>
                        <option value="AP">Amap치</option>
                        <option value="AM">Amazonas</option>
                        <option value="PA">Par치</option>
                        <option value="RO">Rond칪nia</option>
                        <option value="RR">Roraima</option>
                        <option value="TO">Tocantins</option>
                    </optgroup>
                    <optgroup label="Regi칚o Nordeste">
                        <option value="AL">Alagoas</option>
                        <option value="BA">Bahia</option>
                        <option value="CE">Cear치</option>
                        <option value="MA">Maranh칚o</option>
                        <option value="PB">Para칤ba</option>
                        <option value="PE">Pernambuco</option>
                        <option value="PI">Piau칤</option>
                        <option value="RN">Rio Grande do Norte</option>
                        <option value="SE">Sergipe</option>
                    </optgroup>
                    <optgroup label="Regi칚o Centro-Oeste">
                        <option value="DF">Distrito Federal</option>
                        <option value="GO">Goi치s</option>
                        <option value="MT">Mato Grosso</option>
                        <option value="MS">Mato Grosso do Sul</option>
                    </optgroup>
                    <optgroup label="Regi칚o Sudeste">
                        <option value="ES">Esp칤rito Santo</option>
                        <option value="MG">Minas Gerais</option>
                        <option value="RJ">Rio de Janeiro</option>
                        <option value="SP">S칚o Paulo</option>
                    </optgroup>
                    <optgroup label="Regi칚o Sul">
                        <option value="PR">Paran치</option>
                        <option value="RS">Rio Grande do Sul</option>
                        <option value="SC">Santa Catarina</option>
                    </optgroup>
                </select>
            </div>
        </div>
        <button type="submit" class="btn btn-primary">
            <i class="bi bi-arrow-clockwise me-1"></i> Atualizar Munic칤pios
        </button>
    </form>
</div>

    <div class="box">
        <h3>Consultar Munic칤pio</h3>
        <form method="POST" action="{{ url_for('ibge.busca') }}">
            <div class="search-form">
                <input type="text" name="municipio" placeholder="Ex: Florian칩polis" required>
                <button type="submit" class="btn btn-primary">游댌 Buscar</button>
            </div>
        </form>

        {% if resultado %}
        <div class="result">
            <p><strong>C칩digo IBGE:</strong> {{ resultado.codigo }}</p>
            <p><strong>Munic칤pio:</strong> {{ resultado.nome }}</p>
            <p><strong>UF:</strong> {{ resultado.uf }}</p>
        </div>
        {% endif %}

        {% if mensagem %}
        <div class="{{ 'success' if mensagem.startswith('Lista') else 'error' }}">{{ mensagem }}</div>
        {% endif %}
    </div>
</div>
{% endblock %}
